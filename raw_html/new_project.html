<!doctype html>
<html>
    <head>
        
            <title>Projects Portal</title>
        

    
        <link rel="stylesheet" href="static/portal/css/style_harry.css"  />
        <link rel="stylesheet" href="static/portal/css/style_david.css"  />
        <link rel="stylesheet" href="static/portal/css/style_eyal.css"  />
    
    <link rel="stylesheet" href="static/portal/css/style.css"  />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Add this link in your page  -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="static/portal/css/bootstrap-tagsinput.css">

<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
<script src="static/portal/javascript/bootstrap-tagsinput.js"></script>
<!-- scrollable menu -->
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.js"></script>
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.css">

    </head>

    <body>

        <div class="topnav">
            <div>
                <img src="static/portal/images/Hatallogo.png"  alt="logo" width="60">
            </div>
            <a class="active" href="/portal_app/">Projects</a>
            <a class="active" href="/portal_app/new-project">Add project</a>
            <a class="active" href="/portal_app/sign-up">Sign up</a>
            <a class="active" href="/portal_app/login">Sign in</a>
        </div> <!-- End of topnav -->


    <div class="main_container">

        <h1>Add project:</h1>
        <div class="form_container">
            <form class="DefaultForm UserForm" action="" method="post" autocomplete="off" enctype="multipart/form-data" id="categories_form">
            <input type="hidden" name="csrfmiddlewaretoken" value="T2U8IZ1vyOjMGrmWTHk44d8VPZUOkJiGGvYCW116lvSTSPXh1Q3PoX21q4BtIQiK" style="visibility: hidden;">
            <tr>
                <th></th>
                <td>
                    <div>
                        <label for="id_img" class="btn">
                            <div class="img_container">
                                <img id="def_pic" class="preview_pic" alt="Upload picture" class="img_class" title="add a picture to the project" src="../media/project-default.png" height="200px" width="200px">
                                <div class="middle">
                                    <div class="edit" >
                                        Edit &#x1f589
                                    </div>
                                </div>
                        </div>
                        </label>
                        
                        <input type="file" name="img" style="visibility:hidden" accept="image/*" required id="id_img" >
                    </div>
                </td>
            </tr>

            <tr>
                <th><label for="id_name">Title:</label></th>
                <td><input type="text" name="name" maxlength="64" required id="id_name"></td>
            </tr>
            <tr>
                <th><label for="id_description">Description:</label></th>
                <td><textarea name="description" cols="40" rows="10" maxlength="2048" required id="id_description"></textarea></td>
                <br>
            </tr>

            <tr>
                <th><label for="id_tags">Tags:</label></th><br>
                <td>
                    <div class="tagsinput-noborder tagsinput-noinput">
                            <select multiple id="select_tags" data-role="tagsinput"></select>
                    </div>
                    <div class="tagsinput-fullwidth">
                        <input type="text" placeholder="Add tags" id="search_tag" onkeyup="filterTags($('#search_tag').val())" data-role="tagsinput">
                    </div>
                </td>
            </tr>    
            <tr>
                <td>
                    <select multiple id="selected_tags" style="visibility:hidden">
                    </select>
                </td>
            </tr>
                <br>
                    <input type="submit" value="Add project">
                </form>
            </div>
    <div id="existing_tags">

            <p id="physics"></p>

            <p id="biology"></p>

            <p id="maths"></p>

            <p id="computer_science"></p>

            <p id="sport"></p>

            <p id="physics"></p>

            <p id="biology"></p>

            <p id="maths"></p>

            <p id="computer_science"></p>
    </div>
<div id="add_new_tag">
    <p>press enter to add new tag</p>
</div>
<tr><th><div id="project_categories">
        <ul id="project_tags">
        </ul>
        </div></th></tr>
            <input type="submit" value="Add project">
        </form>
    </div>

       
<script src="static/portal/javascript/filter.js" type="text/javascript"></script>
    </body>
    <script>
            let select_field=$("#select_tags");
            let search_field=$("#search_tag");
            let selected_tags=$("#selected_tags");
            select_field.tagsinput({
                tagClass: "edit-tag label label-info"
            });

            let tags=$.makeArray($("#existing_tags").children());
            tags=tags.map((item)=>item.id);
            for (let tag of tags){
                select_field.tagsinput('add', tag);
            }
            select_field.on('itemRemoved', function(event) {
                search_field.tagsinput('add', event.item);
            });

            search_field.on("itemAdded", function(event){
                selected_tags.append('<option selected="" value="'+ event.item + '">physics</option>');
            });

            search_field.on("itemRemoved", function(event){
                $("#selected_tags > option[value='" +event.item  + "']").remove();
            select_field.tagsinput('add',event.item);
            });

    </script>
</html>